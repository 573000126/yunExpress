<?xml version="1.0" encoding="utf-8"?>
<!--
  有关如何配置 ASP.NET 应用程序的详细信息，请访问
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <configSections>
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <!--<section name="cachingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Caching.Configuration.CacheManagerSettings, Microsoft.Practices.EnterpriseLibrary.Caching" />-->
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
  </configSections>
  <connectionStrings>
    <add name="LMS_DbContext" connectionString="metadata=res://*/LMS_DBContext.csdl|res://*/LMS_DBContext.ssdl|res://*/LMS_DBContext.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=211.154.151.46;initial catalog=LMS_DB;persist security info=True;user id=dba;password=lightake;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
    <!--<add name="LMS_DbContext" connectionString="metadata=res://*/LMS_DBContext.csdl|res://*/LMS_DBContext.ssdl|res://*/LMS_DBContext.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=.;initial catalog=LMS;persist security info=True;user id=sa;password=123456;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />-->
  </connectionStrings>
  <appSettings>
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    <!--<add key="CacheProvider" value="LighTake.Infrastructure.Common.Caching.EntLibCacheProvider, LighTake.Infrastructure.Common.Caching" />-->
    <!--LISAPI路径-->
    <add key="LIS_API_Path" value="http://t.tinydx.com:901/LIS.API.V3/" />
    <!--<add key="LIS_API_Path" value="http://localhost:826/" />-->
    <add key="IsValidCustomer" value="true" />
    <add key="UseScrect" value="EtilfU5u5sk9B/xBniJWf9OxYZexd4m4v+bVF1f5Uec=" />
    <add key="CustomerCode" value="C27015" />

    <!--福州邮政对接运输方式Code-->
    <add key="Postal_Docking_Code" value="CNPOST-FZ,CNPOSTP_FZ" />
    
    <!--欧洲专线DDP挂号运输方式Code-->
    <add key="DDPRegisterShippingMethodCode" value="EUDDP" />

    <!--欧洲专线DDP平邮运输方式Code-->
    <add key="DDPShippingMethodCode" value="EUDDPG" />

    <!--欧洲专线运输方式Code-->
    <add key="EuropeShippingMethodCode" value="EUCK" />

    <!--DHL新加坡预报运输方式Code-->
    <add key="DHL_Singapore_Code" value="DHLSG,DHLSGL" />

    <!--EUB预报运输方式Code-->
    <add key="EUB_Singapore_Code" value="EUB_CS,EUB-SZ,EUB-FZ" />
    
    <!--DHL新加坡预报服务商Code-->
    <add key="DHL_VenderCode" value="11" />
    
    <!--Tis_Api路径-->
    <add key="TIS_API_Path" value="http://t.tinydx.com:828/" />
    <!--荷兰邮政小包挂号运输方式ID,多个必须荷兰邮政小包运输方式ID必须放第一位-->
    <add key="NLPOSTShippingMethodID" value="82,1094" />
    <!--荷兰邮政小包挂号服务商代码-->
    <add key="NLPOSTVenderCode" value="11"/>
    <!--俄罗斯挂号、平邮服务商代码-->
    <add key="LithuaniaVenderCode" value="11"/>
    <!--俄罗斯挂号、平邮运输方式ID 挂号必须放在第一位，平邮放在第二位-->
    <add key="LithuaniaShippingMethodID" value="1096,1097"/>
    <!--俄罗斯挂号、平邮CheckWord-->
    <add key="LithuaniaAuthorization" value="szglkj,MoZYb2Lenno3N3TLfI[;"/>
    <!--顺丰CheckWord-->
    <!--<add key="SFCheckWord" value="BE24CA6B4D266BC3E9A4654C6D94B057"/>-->
    <add key="SFCheckWord" value="E1F457C891EE40C3991163B202A19599" />
    <!--顺丰服务商接入码-->
    <add key="ClientCode" value="7550360428" />
    <!--<add key="ClientCode" value="7550003352"/>-->
    <!--需要返回顺丰单号客户，多个已半角逗号分开 C10101,C10102-->
    <add key="IsTurnSFNumber" value="C88888"/>
    <!--DHLBarCode图片物理路径-->
    <add key="DHLBarCodePath" value="D:\wwwroot\WebSites\LighTake.LMS\LighTake.LMS.Web.Admin\Images\DHLBarCode\" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <authentication mode="None" />
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <profile defaultProvider="DefaultProfileProvider">
      <providers>
        <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </profile>
    <membership defaultProvider="DefaultMembershipProvider">
      <providers>
        <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
      </providers>
    </membership>
    <roleManager defaultProvider="DefaultRoleProvider">
      <providers>
        <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
      </providers>
    </roleManager>
    <!--
            If you are deploying to a cloud environment that has multiple web server instances,
            you should change session state mode from "InProc" to "Custom". In addition,
            change the connection string named "DefaultConnection" to connect to an instance
            of SQL Server (including SQL Azure and SQL  Compact) instead of to SQL Server Express.
      -->
    <sessionState mode="InProc" customProvider="DefaultSessionProvider">
      <providers>
        <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
      </providers>
    </sessionState>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-1.3.0.0" newVersion="1.3.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="Autofac" publicKeyToken="17863af14b0044da" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="FluentValidation" />
        <bindingRedirect oldVersion="0.0.0.0-4.3.1.0" newVersion="5.0.0.1" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="MiniProfiler" publicKeyToken="b44f9351044011a3" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-3.1.1.139" newVersion="3.1.1.139" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Runtime" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.6.9.0" newVersion="2.6.9.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Threading.Tasks" publicKeyToken="b03f5f7f11d50a3a" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.6.9.0" newVersion="2.6.9.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
    <providers>
      <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
    </providers>
  </entityFramework>
  <!--<cachingConfiguration defaultCacheManager="DefaultCacheManager">
    <backingStores>
      <add name="inMemory" type="Microsoft.Practices.EnterpriseLibrary.Caching.BackingStoreImplementations.NullBackingStore, Microsoft.Practices.EnterpriseLibrary.Caching" />
    </backingStores>
    <cacheManagers>
      -->
  <!--expirationPollFrequencyInSeconds:缓存过期检测频率-->
  <!--
      -->
  <!--maximumElementsInCacheBeforeScavenging:缓存中的最大元素数量-->
  <!--
      -->
  <!--numberToRemoveWhenScavenging:缓存清除时一次移除的数量-->
  <!--
      <add name="DefaultCacheManager" type="Microsoft.Practices.EnterpriseLibrary.Caching.CacheManager, Microsoft.Practices.EnterpriseLibrary.Caching" expirationPollFrequencyInSeconds="60" maximumElementsInCacheBeforeScavenging="1000" numberToRemoveWhenScavenging="10" backingStoreName="inMemory" />
    </cacheManagers>
  </cachingConfiguration>-->

  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IPMSService" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="BasicHttpBinding_ITrackNumberAssign" />
        <binding name="SfexpressServiceImplServiceSoapBinding" />
        <binding name="CommonServiceServiceSoapBinding" />
      </basicHttpBinding>

    </bindings>
    <client>
      <endpoint address="http://test.tinydx.com:901/PMS.WcfService/PMSService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IPMSService" contract="PMSServiceReference.IPMSService" name="BasicHttpBinding_IPMSService" />
      <endpoint address="http://localhost:836/TrackNumberAssign.svc/Wcf"  binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ITrackNumberAssign"  contract="RefAPI.TrackNumber.ITrackNumberAssign" name="BasicHttpBinding_ITrackNumberAssign" />
      <endpoint address="http://120.24.60.8:8003/CBTA/ws/sfexpressService" binding="basicHttpBinding" bindingConfiguration="SfexpressServiceImplServiceSoapBinding" contract="References.Sfexpress.SfexpressService" name="SfexpressServiceImplPort" />
      <endpoint address="http://219.134.187.131:6080/bsp-oisp/ws/expressService"
                binding="basicHttpBinding" bindingConfiguration="CommonServiceServiceSoapBinding"
                contract="References.SfCommon.IService" name="CommonServicePort" />
    </client>
  </system.serviceModel>



  <log4net>
    <!--文件日志输出格式-->
    <appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
      <!--存放日志的路径-->
      <param name="File" value="Log\" />
      <!--是否想日志文件中追加-->
      <param name="AppendToFile" value="true" />
      <!--最多保存多少天的记录-->
      <param name="MaxSizeRollBackups" value="100" />
      <!--日期文件是否固定不变-->
      <param name="StaticLogFileName" value="false" />
      <param name="DatePattern" value="yyyyMMdd&quot;.htm&quot;" />
      <!--日志根据日期滚动-->
      <param name="RollingStyle" value="Date" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="&lt;HR COLOR=red&gt;%n日志时间：%d [%t] &lt;BR&gt;%n日志级别：%-5p &lt;BR&gt;%n日志类别：%c [%x] &lt;BR&gt;%n%m &lt;BR&gt;%n &lt;HR Size=1&gt;" />
      </layout>
    </appender>
    <appender name="ErrorRollingFileAppender" type="log4net.Appender.RollingFileAppender" LEVEL="ERROR">
      <!--存放日志的路径-->
      <param name="File" value="Log\" />
      <!--是否想日志文件中追加-->
      <param name="AppendToFile" value="true" />
      <!--最多保存多少天的记录-->
      <param name="MaxSizeRollBackups" value="100" />
      <!--日期文件是否固定不变-->
      <param name="StaticLogFileName" value="false" />
      <param name="DatePattern" value="yyyyMMdd&quot;-Error.htm&quot;" />
      <!--日志根据日期滚动-->
      <param name="RollingStyle" value="Date" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="&lt;HR COLOR=red&gt;%n日志时间：%d [%t] &lt;BR&gt;%n日志级别：%-5p &lt;BR&gt;%n日志类别：%c [%x] &lt;BR&gt;%n%m &lt;BR&gt;%n &lt;HR Size=1&gt;" />
      </layout>
      <filter type="log4net.Filter.LevelRangeFilter">
        <param name="LevelMin" value="ERROR" />
        <param name="LevelMax" value="ERROR" />
      </filter>
    </appender>
    <!--控制台日志输出格式-->
    <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender">
      <target value="Console.Error" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%d [%t] %-5p %c [%x] - %m%n" />
      </layout>
    </appender>
    <!--带颜色的控制台日志输出格式-->
    <appender name="ColoredConsoleAppender" type="log4net.Appender.ColoredConsoleAppender">
      <mapping>
        <level value="ERROR" />
        <foreColor value="White" />
        <backColor value="Red, HighIntensity" />
      </mapping>
      <mapping>
        <level value="DEBUG" />
        <foreColor value="Green" />
      </mapping>
      <mapping>
        <level value="WARN" />
        <foreColor value="Yellow" />
      </mapping>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
      </layout>
    </appender>
    <!--邮件日志输出格式-->
    <appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
      <to value="lix@cnYH.com" />
      <from value="lix@cnYH.com" />
      <subject value="test logging message" />
      <smtpHost value="192.168.1.11" />
      <authentication value="Basic" />
      <port value="25" />
      <username value="xx" />
      <password value="yy" />
      <bufferSize value="5" />
      <lossy value="false" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%newline%date [%thread] %-5level %logger [%property{NDC}] - %message%newline%newline%newline" />
      </layout>
    </appender>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="RollingFileAppender" />
      <appender-ref ref="ErrorRollingFileAppender" />
    </root>
    <logger name="DefaultLogger">
      <level value="DEBUG" />
      <appender-ref ref="ColoredConsoleAppender" />
      <appender-ref ref="RollingLogFileAppender" />
    </logger>
  </log4net>
</configuration>